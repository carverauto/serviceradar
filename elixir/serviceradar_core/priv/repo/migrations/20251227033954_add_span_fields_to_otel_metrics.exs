defmodule ServiceRadar.Repo.Migrations.AddSpanFieldsToOtelMetrics do
  @moduledoc """
  Updates resources based on their most recent snapshots.

  This file was autogenerated with `mix ash_postgres.generate_migrations`
  """

  use Ecto.Migration

  

  def up do
    alter table(:otel_metrics) do
add :duration_seconds, :float
add :trace_id, :text
add :span_id, :text
add :span_name, :text
add :span_kind, :text
add :grpc_service, :text
add :grpc_method, :text
add :grpc_status_code, :bigint
add :component, :text
add :level, :text
add :unit, :text
add :created_at, :utc_datetime_usec, null: false, default: fragment("(now() AT TIME ZONE 'utc')")
end

  end

  def down do
    alter table(:otel_metrics) do
remove :created_at
remove :unit
remove :level
remove :component
remove :grpc_status_code
remove :grpc_method
remove :grpc_service
remove :span_kind
remove :span_name
remove :span_id
remove :trace_id
remove :duration_seconds
end

  end
end
