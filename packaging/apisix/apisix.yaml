routes:
  - name: core_api
    priority: 20
    uri: /api/*
    upstream:
      type: roundrobin
      nodes:
        "core.example.com:8090": 1
    plugins:
      openid-connect:
        discovery: https://core.example.com/.well-known/openid-configuration
        bearer_only: true
        set_id_token_header: X-ID-Token
        set_userinfo_header: X-Userinfo

  - name: public_auth
    priority: 10
    uri: /auth/*
    upstream:
      type: roundrobin
      nodes:
        "core.example.com:8090": 1

  - name: web_ui
    priority: 1
    uri: /*
    upstream:
      type: roundrobin
      nodes:
        "web.example.com:80": 1
