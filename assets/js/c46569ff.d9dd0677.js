"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6210],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(96540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},50461:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/snmp-traffic-a8a864f5d88b6d432b96994e0d40e996.png"},57729:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var r=i(84691),t=i(74848),s=i(28453);const o={slug:"monitoring-ubiquiti-with-serviceradar-snmp",title:"Monitoring Your Ubiquiti Dream Machine Pro with ServiceRadar's SNMP Poller",authors:"mfreeman",tags:["monitoring","nms","netauto","observability","security"],date:new Date("2025-03-26T00:00:00.000Z")},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Why Monitor Your UDM-Pro with SNMP?",id:"why-monitor-your-udm-pro-with-snmp",level:2},{value:"Step 1: Enable SNMP on Your Ubiquiti Dream Machine Pro",id:"step-1-enable-snmp-on-your-ubiquiti-dream-machine-pro",level:2},{value:"Step 2: Find the WAN Interface OID with an SNMP Walk",id:"step-2-find-the-wan-interface-oid-with-an-snmp-walk",level:2},{value:"Install snmpwalk",id:"install-snmpwalk",level:3},{value:"Run an SNMP Walk",id:"run-an-snmp-walk",level:3},{value:"Get the OIDs for Traffic Monitoring",id:"get-the-oids-for-traffic-monitoring",level:2},{value:"Inbound Octets (Download)",id:"inbound-octets-download",level:3},{value:"Outbound Octets (Upload)",id:"outbound-octets-upload",level:3},{value:"Step 3: Configure ServiceRadar&#39;s SNMP Poller",id:"step-3-configure-serviceradars-snmp-poller",level:2},{value:"Install the SNMP Checker",id:"install-the-snmp-checker",level:2},{value:"Edit the Configuration",id:"edit-the-configuration",level:2},{value:"Restart and Verify",id:"restart-and-verify",level:2},{value:"Step 4: See It in Action",id:"step-4-see-it-in-action",level:2},{value:"Why ServiceRadar Shines Here",id:"why-serviceradar-shines-here",level:2}];function d(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Network monitoring doesn't have to be complicated\u2014especially when you're managing devices like the Ubiquiti UniFi Dream Machine Pro (UDM-Pro). With ServiceRadar's SNMP Poller feature, you can easily keep tabs on your router's performance, like tracking bandwidth on your primary WAN interface, without breaking a sweat. In this post, we'll walk you through enabling SNMP on your UDM-Pro, finding the right OID for your WAN interface using a handy open-source tool, and setting it up in ServiceRadar. Whether you're a seasoned network admin or just getting started, this guide will show you how simple it can be to gain real-time visibility into your network."}),"\n",(0,t.jsx)(n.p,{children:"Let's dive in and see how ServiceRadar makes monitoring your Ubiquiti gear a breeze!"}),"\n",(0,t.jsx)(n.h2,{id:"why-monitor-your-udm-pro-with-snmp",children:"Why Monitor Your UDM-Pro with SNMP?"}),"\n",(0,t.jsx)(n.p,{children:"The Ubiquiti UniFi Dream Machine Pro is a powerful all-in-one router and network management device, popular for its sleek interface and robust feature set. But while the UniFi dashboard gives you a great overview, it doesn't always provide the granular, real-time data you might need\u2014like detailed WAN interface stats for troubleshooting or capacity planning. That's where SNMP (Simple Network Management Protocol) comes in, and ServiceRadar's SNMP Poller takes it to the next level."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"snmp-traffic.png",src:i(50461).A+"",width:"2728",height:"800"})}),"\n",(0,t.jsx)(n.p,{children:"With ServiceRadar, you can:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Track interface metrics like inbound/outbound octets (bandwidth usage) on your WAN port."}),"\n",(0,t.jsx)(n.li,{children:"Set up alerts for anomalies, like sudden traffic spikes or drops. (Planned)"}),"\n",(0,t.jsx)(n.li,{children:"Integrate UDM-Pro data into a broader monitoring ecosystem alongside servers, services, and other network gear."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Best of all? ServiceRadar's distributed architecture means this data is collected securely and efficiently, even in remote or constrained environments. Let's get started."}),"\n",(0,t.jsx)(n.h2,{id:"step-1-enable-snmp-on-your-ubiquiti-dream-machine-pro",children:"Step 1: Enable SNMP on Your Ubiquiti Dream Machine Pro"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Log in to Your UDM-Pro"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Access the UniFi Network Management Controller via your browser (typically at ",(0,t.jsx)(n.code,{children:"https://<UDM-Pro-IP>"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Sign in with your administrator credentials"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Navigate to SNMP Settings"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Click on ",(0,t.jsx)(n.strong,{children:"Network"})," in the top navigation bar"]}),"\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Settings"})," (gear icon in the left sidebar)"]}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"System"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click on the ",(0,t.jsx)(n.strong,{children:"Traffic Logging"})," tab"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Enable SNMP Monitoring"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Scroll down to the "SNMP Monitoring" section'}),"\n",(0,t.jsxs)(n.li,{children:["Check the box for ",(0,t.jsx)(n.strong,{children:"Version 1/2C"})]}),"\n",(0,t.jsxs)(n.li,{children:["Enter your desired ",(0,t.jsx)(n.strong,{children:"Community String"}),' (the example shows "public" but you should use something more secure for production)']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"ubiq-snmp.png",src:i(75173).A+"",width:"1288",height:"296"})}),"\n",(0,t.jsx)(n.h2,{id:"step-2-find-the-wan-interface-oid-with-an-snmp-walk",children:"Step 2: Find the WAN Interface OID with an SNMP Walk"}),"\n",(0,t.jsxs)(n.p,{children:["SNMP uses Object Identifiers (OIDs) to pinpoint specific metrics\u2014like the number of bytes flowing through your WAN interface. For the UDM-Pro, the primary WAN port is typically ",(0,t.jsx)(n.code,{children:"eth8"})," or ",(0,t.jsx)(n.code,{children:"eth9"})," (depending on your setup), and we'll use an open-source tool called ",(0,t.jsx)(n.code,{children:"snmpwalk"})," to find its OID."]}),"\n",(0,t.jsx)(n.h3,{id:"install-snmpwalk",children:"Install snmpwalk"}),"\n",(0,t.jsx)(n.p,{children:"On a Linux system (Ubuntu/Debian):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install -y snmp snmp-mibs-downloader\n"})}),"\n",(0,t.jsx)(n.p,{children:"On macOS (using Homebrew):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install net-snmp\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-an-snmp-walk",children:"Run an SNMP Walk"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use snmpwalk to query the UDM-Pro's interface table:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"snmpwalk -v2c -c <your-community-string> <UDM-Pro-IP> .1.3.6.1.2.1.2.2\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This OID (ifTable) lists all network interfaces. Look for the WAN interface by matching the description or index:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"IF-MIB::ifInOctets.1 = Counter32: 2973357339\nIF-MIB::ifInOctets.2 = Counter32: 0\nIF-MIB::ifInOctets.3 = Counter32: 0\nIF-MIB::ifInOctets.4 = Counter32: 765010189\nIF-MIB::ifInOctets.5 = Counter32: 3983110857\nIF-MIB::ifInOctets.6 = Counter32: 0\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If eth8 or eth9 is your WAN port (check your UniFi config), note its index (e.g., 8 or 9)."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"get-the-oids-for-traffic-monitoring",children:"Get the OIDs for Traffic Monitoring"}),"\n",(0,t.jsx)(n.h3,{id:"inbound-octets-download",children:"Inbound Octets (Download)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The OID for inbound octets is ",(0,t.jsx)(n.code,{children:".1.3.6.1.2.1.2.2.1.10.<index>"}),". So, if your WAN is eth4 (index 4):","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["OID = ",(0,t.jsx)(n.code,{children:".1.3.6.1.2.1.2.2.1.10.4"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Test it:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"snmpget -v2c -c public 192.168.1.1 .1.3.6.1.2.1.2.2.1.10.4\n"})}),"\n","Should return something like:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"IF-MIB::ifInOctets.4 = Counter32: 826260892\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"outbound-octets-upload",children:"Outbound Octets (Upload)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The OID for outbound octets is ",(0,t.jsx)(n.code,{children:".1.3.6.1.2.1.2.2.1.16.<index>"}),". Using the same example:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["OID = ",(0,t.jsx)(n.code,{children:".1.3.6.1.2.1.2.2.1.16.4"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Test it:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"snmpget -v2c -c public 192.168.1.1 .1.3.6.1.2.1.2.2.1.16.4\n"})}),"\n","Should return something like:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"IF-MIB::ifOutOctets.4 = Counter32: 198726543\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pro Tip:"})," If you're unsure which interface is your WAN, compare ifInOctets and ifOutOctets values over time (snmpget twice with a delay) to spot the active one. The interface with changing values is likely your active WAN."]}),"\n",(0,t.jsx)(n.h2,{id:"step-3-configure-serviceradars-snmp-poller",children:"Step 3: Configure ServiceRadar's SNMP Poller"}),"\n",(0,t.jsx)(n.p,{children:"Now that SNMP is enabled and you've got your OIDs, let's plug them into ServiceRadar. The SNMP Checker runs alongside the Agent and polls your UDM-Pro for you."}),"\n",(0,t.jsx)(n.h2,{id:"install-the-snmp-checker",children:"Install the SNMP Checker"}),"\n",(0,t.jsx)(n.p,{children:"If you haven't already:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -LO https://github.com/carverauto/serviceradar/releases/download/1.0.35/serviceradar-snmp-checker_1.0.35.deb\nsudo dpkg -i serviceradar-snmp-checker_1.0.35.deb\n"})}),"\n",(0,t.jsx)(n.h2,{id:"edit-the-configuration",children:"Edit the Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Update ",(0,t.jsx)(n.code,{children:"/etc/serviceradar/checkers/snmp.json"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "node_address": "localhost:50051",\n  "listen_addr": ":50054",\n  "security": {\n    "mode": "none",\n    "role": "checker",\n    "cert_dir": "/etc/serviceradar/certs"\n  },\n  "timeout": "30s",\n  "targets": [\n    {\n      "name": "udm-pro-wan",\n      "host": "<UDM-Pro-IP>",\n      "port": 161,\n      "community": "<your-community-string>",\n      "version": "v2c",\n      "interval": "30s",\n      "retries": 2,\n      "oids": [\n        {\n          "oid": ".1.3.6.1.2.1.2.2.1.10.4",\n          "name": "ifInOctets_4",\n          "type": "counter",\n          "scale": 1.0,\n          "delta": true\n        },\n        {\n           "oid": ".1.3.6.1.2.1.2.2.1.16.4",\n           "name": "ifOutOctets_4",\n           "type": "counter",\n           "scale": 1.0,\n           "delta": true  \n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Replace <UDM-Pro-IP> and <your-community-string> with your values."}),"\n",(0,t.jsx)(n.li,{children:"Adjust the OID if your WAN index differs."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"restart-and-verify",children:"Restart and Verify"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart serviceradar-snmp-checker\nsudo systemctl status serviceradar-snmp-checker\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-4-see-it-in-action",children:"Step 4: See It in Action"}),"\n",(0,t.jsx)(n.p,{children:"With everything set up, your ServiceRadar dashboard (at http://<your-server-ip>/) will start showing WAN bandwidth data from your UDM-Pro. The Core Service aggregates this info from the Poller, which queries the Agent and SNMP Checker\u2014delivering a clean, real-time view of your network."}),"\n",(0,t.jsx)(n.h2,{id:"why-serviceradar-shines-here",children:"Why ServiceRadar Shines Here"}),"\n",(0,t.jsx)(n.p,{children:"This setup showcases what makes ServiceRadar special:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ease of Use"}),": No complex scripting\u2014just a JSON config and you're monitoring."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Flexibility"}),": Add more OIDs or devices as needed, from routers to switches."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Security"}),": Pair it with mTLS (see our TLS Security guide) for end-to-end encryption."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Scalability"}),": Monitor one UDM-Pro or a whole fleet\u2014it's up to you."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},75173:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/ubiq-snmp-1a2a8fd09958cbd10ec6a74690c21b6f.png"},84691:e=>{e.exports=JSON.parse('{"permalink":"/blog/monitoring-ubiquiti-with-serviceradar-snmp","source":"@site/blog/2025-03-26-snmp-ubiquiti-dream-pro/index.md","title":"Monitoring Your Ubiquiti Dream Machine Pro with ServiceRadar\'s SNMP Poller","description":"Network monitoring doesn\'t have to be complicated\u2014especially when you\'re managing devices like the Ubiquiti UniFi Dream Machine Pro (UDM-Pro). With ServiceRadar\'s SNMP Poller feature, you can easily keep tabs on your router\'s performance, like tracking bandwidth on your primary WAN interface, without breaking a sweat. In this post, we\'ll walk you through enabling SNMP on your UDM-Pro, finding the right OID for your WAN interface using a handy open-source tool, and setting it up in ServiceRadar. Whether you\'re a seasoned network admin or just getting started, this guide will show you how simple it can be to gain real-time visibility into your network.","date":"2025-03-26T00:00:00.000Z","tags":[{"inline":false,"label":"Monitoring","permalink":"/blog/tags/monitoring","description":"Monitoring tag description"},{"inline":false,"label":"Network Management Systems","permalink":"/blog/tags/nms","description":"Network Management System tag description"},{"inline":false,"label":"Network Automation","permalink":"/blog/tags/netauto","description":"Network Automation tag description"},{"inline":false,"label":"Observability","permalink":"/blog/tags/observability","description":"Observability tag description"},{"inline":false,"label":"Security","permalink":"/blog/tags/security","description":"Security tag description"}],"readingTime":4.75,"hasTruncateMarker":true,"authors":[{"name":"Michael Freeman","title":"Open Source Software Engineer","url":"https://carverauto.dev","page":{"permalink":"/blog/authors/all-michael-freeman-articles"},"socials":{"x":"https://x.com/mfreeman451","github":"https://github.com/mfreeman451","linkedin":"https://www.linkedin.com/in/mfreeman451/"},"imageURL":"https://avatars.githubusercontent.com/u/1821930?v=4","key":"mfreeman"}],"frontMatter":{"slug":"monitoring-ubiquiti-with-serviceradar-snmp","title":"Monitoring Your Ubiquiti Dream Machine Pro with ServiceRadar\'s SNMP Poller","authors":"mfreeman","tags":["monitoring","nms","netauto","observability","security"],"date":"2025-03-26T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"Welcome to the ServiceRadar Blog","permalink":"/blog/welcome-to-serviceradar"}}')}}]);