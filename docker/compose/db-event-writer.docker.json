{
  "listen_addr": "0.0.0.0:50041",
  "nats_url": "tls://nats:4222",
  "partition": "docker",
  "stream_name": "events",
  "consumer_name": "db-event-writer",
  "agent_id": "docker-db-event-writer",
  "poller_id": "docker-poller",
  "streams": [
    {
      "subject": "events.poller.health",
      "table": "events"
    },
    {
      "subject": "events.syslog.processed", 
      "table": "events"
    },
    {
      "subject": "events.snmp.processed",
      "table": "events" 
    },
    {
      "subject": "events.otel.logs",
      "table": "logs"
    },
    {
      "subject": "events.otel.traces",
      "table": "otel_traces"
    },
    {
      "subject": "events.otel.metrics", 
      "table": "otel_metrics"
    }
  ],
  "database": {
    "addresses": [
      "proton:9440"
    ],
    "name": "default",
    "username": "proton",
    "password": "proton@t+"
  },
  "security": {
    "mode": "mtls",
    "cert_dir": "/etc/serviceradar/certs",
    "server_name": "serviceradar-db-event-writer",
    "role": "core",
    "tls": {
      "cert_file": "/etc/serviceradar/certs/db-event-writer.pem",
      "key_file": "/etc/serviceradar/certs/db-event-writer-key.pem",
      "ca_file": "/etc/serviceradar/certs/root.pem"
    }
  },
  "nats_security": {
    "mode": "mtls",
    "cert_dir": "/etc/serviceradar/certs",
    "server_name": "nats",
    "role": "client",
    "tls": {
      "cert_file": "/etc/serviceradar/certs/db-event-writer.pem",
      "key_file": "/etc/serviceradar/certs/db-event-writer-key.pem",
      "ca_file": "/etc/serviceradar/certs/root.pem"
    }
  },
  "db_security": {
    "mode": "mtls",
    "cert_dir": "/etc/serviceradar/certs",
    "server_name": "proton",
    "role": "client",
    "tls": {
      "cert_file": "/etc/serviceradar/certs/db-event-writer.pem",
      "key_file": "/etc/serviceradar/certs/db-event-writer-key.pem",
      "ca_file": "/etc/serviceradar/certs/root.pem"
    }
  },
  "logging": {
    "level": "info",
    "debug": false,
    "output": "stdout",
    "time_format": "",
    "otel": {
      "enabled": true,
      "endpoint": "otel:4317",
      "service_name": "serviceradar-db-event-writer",
      "batch_timeout": "5s",
      "insecure": false,
      "tls": {
        "cert_file": "/etc/serviceradar/certs/db-event-writer.pem",
        "key_file": "/etc/serviceradar/certs/db-event-writer-key.pem",
        "ca_file": "/etc/serviceradar/certs/root.pem"
      }
    }
  }
}