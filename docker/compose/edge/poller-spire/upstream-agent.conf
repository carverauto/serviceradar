agent {
  data_dir = "/run/spire/nested/upstream-agent"
  log_level = "INFO"
  trust_domain = "carverauto.dev"
  server_address = "host.docker.internal"
  server_port = "18081"
  socket_path = "/run/spire/nested/upstream/agent.sock"
  insecure_bootstrap = false
  retry_bootstrap = true
}

plugins {
  NodeAttestor "join_token" {
    plugin_data {}
  }

  KeyManager "memory" {
    plugin_data {}
  }

  WorkloadAttestor "unix" {
    plugin_data {}
  }
}

health_checks {
  listener_enabled = true
  bind_address = "0.0.0.0"
  bind_port = "18080"
  live_path = "/live"
  ready_path = "/ready"
}
