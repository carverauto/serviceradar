name: Bazel Bootstrap

on:
  push:
    branches:
      - main
      - 'bazel/**'
  pull_request:
    paths:
      - '**/*.bzl'
      - '**/BUILD.bazel'
      - MODULE.bazel
      - WORKSPACE.bazel
      - bazel_implementation_plan.md
      - .github/workflows/bazel-bootstrap.yml
      - docs/**
      - proto/**

jobs:
  lint:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    permissions:
      contents: read

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install Bazel
        uses: bazel-contrib/setup-bazel@0.15.0
        with:
          bazelisk-version: 1.x

      - name: Build docs lint target
        run: bazel build //docs:lint
